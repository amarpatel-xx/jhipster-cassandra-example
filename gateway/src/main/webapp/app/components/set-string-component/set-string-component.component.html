<div class="container">
  <form [formGroup]="form">
    <!-- Existing fields -->
    <div *ngFor="let control of fields.controls; let i = index" class="input-row">
      <mat-form-field appearance="outline">
        <mat-label>Value</mat-label>
        <input matInput [formControl]="getFormControl(i)" />
        <mat-error *ngIf="getFormControl(i).invalid && getFormControl(i).touched"> Field is required </mat-error>
      </mat-form-field>

      <!-- Action Buttons (10%) -->
      <div class="action-buttons">
        <button type="button" mat-icon-button (click)="openEditDialog(i)">
          <mat-icon>edit</mat-icon>
        </button>

        <button type="button" mat-icon-button (click)="removeInputField(i)">
          <mat-icon>close</mat-icon>
        </button>
      </div>
    </div>

    <!-- New Field Row (Always visible) -->
    <div class="input-row">
      <mat-form-field appearance="outline">
        <mat-label>New Value</mat-label>
        <input matInput [formControl]="newFieldControl" />
        <mat-error *ngIf="newFieldControl.invalid && newFieldControl.touched"> Field is required </mat-error>
      </mat-form-field>

      <button
        type="button"
        mat-raised-button
        color="primary"
        [disabled]="newFieldControl.invalid"
        (click)="addNewField()"
        class="add-button"
      >
        Add
      </button>
    </div>
  </form>
</div>
